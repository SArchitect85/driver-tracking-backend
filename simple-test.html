<!DOCTYPE html>
<html>
<head><title>Production API Test</title></head>
<body style="font-family: Arial; padding: 40px;">
<h1>üöÄ Production API Test</h1>
<p>API: https://driver-tracking-backend-production.up.railway.app</p>

<button onclick="test1()" style="padding: 15px; margin: 10px; font-size: 16px;">1. Test Backend</button>
<div id="r1"></div>

<button onclick="test2()" style="padding: 15px; margin: 10px; font-size: 16px;">2. Admin Login</button>
<div id="r2"></div>

<button onclick="test3()" style="padding: 15px; margin: 10px; font-size: 16px;">3. Create Driver</button>
<div id="r3"></div>

<button onclick="test4()" style="padding: 15px; margin: 10px; font-size: 16px;">4. Driver Login</button>
<div id="r4"></div>

<button onclick="test5()" style="padding: 15px; margin: 10px; font-size: 16px;">5. Start Shift</button>
<div id="r5"></div>

<script>
var API='https://driver-tracking-backend-production.up.railway.app/api';
var adminToken='';
var driverToken='';
var shiftId=null;

function show(id,msg,ok){document.getElementById(id).innerHTML='<div style="padding:15px;background:'+(ok?'lightgreen':'pink')+';margin:10px 0;">'+msg+'</div>';}

function test1(){
  fetch('https://driver-tracking-backend-production.up.railway.app/health')
  .then(function(r){return r.json();})
  .then(function(d){show('r1','‚úÖ Backend running! '+JSON.stringify(d),true);})
  .catch(function(e){show('r1','‚ùå '+e.message,false);});
}

function test2(){
  fetch(API+'/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:'admin@example.com',password:'admin123'})})
  .then(function(r){return r.json();})
  .then(function(d){
    if(d.token){adminToken=d.token;show('r2','‚úÖ Admin logged in!',true);}
    else{show('r2','‚ùå '+JSON.stringify(d),false);}
  })
  .catch(function(e){show('r2','‚ùå '+e.message,false);});
}

function test3(){
  fetch(API+'/auth/register',{method:'POST',headers:{'Authorization':'Bearer '+adminToken,'Content-Type':'application/json'},body:JSON.stringify({email:'driver@example.com',password:'driver123',firstName:'Test',lastName:'Driver',phoneNumber:'555-1234'})})
  .then(function(r){return r.json();})
  .then(function(d){show('r3','‚úÖ Driver created! '+JSON.stringify(d),true);})
  .catch(function(e){show('r3','‚ùå '+e.message,false);});
}

function test4(){
  fetch(API+'/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:'driver@example.com',password:'driver123'})})
  .then(function(r){return r.json();})
  .then(function(d){
    if(d.token){driverToken=d.token;show('r4','‚úÖ Driver logged in!',true);}
    else{show('r4','‚ùå '+JSON.stringify(d),false);}
  })
  .catch(function(e){show('r4','‚ùå '+e.message,false);});
}

function test5(){
  fetch(API+'/shifts/start',{method:'POST',headers:{'Authorization':'Bearer '+driverToken,'Content-Type':'application/json'},body:JSON.stringify({latitude:34.05,longitude:-118.24})})
  .then(function(r){return r.json();})
  .then(function(d){
    if(d.shift){shiftId=d.shift.id;show('r5','‚úÖ Shift started! ID: '+shiftId,true);}
    else{show('r5','‚ùå '+JSON.stringify(d),false);}
  })
  .catch(function(e){show('r5','‚ùå '+e.message,false);});
}
</script>
</body>
</html>
